<?php

use Illuminate\Database\Migrations\Migration;
use Illuminate\Database\Schema\Blueprint;
use Illuminate\Support\Facades\Schema;

return new class extends Migration
{
    public function up()
    {
        Schema::table('country_scores', function (Blueprint $table) {
            // climate_vulnerability entfernen
            $table->dropColumn('climate_vulnerability');

            // neue WRI-Felder hinzufügen
            $table->float('wri_score')->nullable()->after('weapons_indicator');
            $table->float('wri_exposure')->nullable()->after('wri_score');
            $table->float('wri_vulnerability')->nullable()->after('wri_exposure');
            $table->float('wri_susceptibility')->nullable()->after('wri_vulnerability');
            $table->float('wri_coping_capacity')->nullable()->after('wri_susceptibility');
            $table->float('wri_adaptive_capacity')->nullable()->after('wri_coping_capacity');
        });
    }

    public function down()
    {
        Schema::table('country_scores', function (Blueprint $table) {
            // neue WRI-Felder entfernen
            $table->dropColumn([
                'wri_score',
                'wri_exposure',
                'wri_vulnerability',
                'wri_susceptibility',
                'wri_coping_capacity',
                'wri_adaptive_capacity',
            ]);

            // climate_vulnerability wiederherstellen (nur falls Rollback nötig)
            $table->float('climate_vulnerability')->nullable()->after('weapons_indicator');
        });
    }
};
